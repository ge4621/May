<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="scheduleMapper">
	<resultMap type="schedule" id="resultSchedule">
		<result column="schedule_no" property="scheduleNo" />
		<result column="user_no" property="userNo" />
		<result column="title" property="title" />
		<result column="content" property="content" />
		<result column="start_date" property="startDate" />
	</resultMap>
	
	<resultMap type="schedule" id="detailSchedule">
		<result column="schedule_no" property="scheduleNo" />
		<result column="user_no" property="userNo" />
		<result column="title" property="title" />
		<result column="content" property="content" />
		<result column="start_date" property="startDate" />
	</resultMap>
	
	<insert id="saveSehedule" >
		insert into schedule
			(
				schedule_no,
				user_no,
				title,
				content,
				start_date,
				create_date
			)
			values
			(
				schedule_seq.NEXTVAL
				,#{userNo}
				,#{schedule.title}
				,#{schedule.content}
				,#{schedule.startDate}
				,sysdate
			)
	</insert>
	
	<select id = "selectSchedule" resultMap="resultSchedule">
		select *
	    from schedule
	    where user_no = #{userNo}
	    and start_date = TO_DATE(#{startDate}, 'YY/MM/DD') 
	</select>
	
	<select id="detailSchedule" resultMap="detailSchedule">
		select *
		from schedule
		where user_no = #{userNo}
		and schedule_no = #{schedule.scheduleNo} 
	</select>
	
	<update id="updateSchedule">
		update schedule
		set title = #{schedule.title}
		, content = #{schedule.content}
		, update_date = sysdate
		where user_no = #{userNo}
		and schedule_no = #{schedule.scheduleNo}
	</update>
	
	<delete id="deleteSchedule">
		delete 
		from schedule
		where user_no = #{userNo}
		and schedule_no = #{schedule.scheduleNo}
	</delete>
</mapper>